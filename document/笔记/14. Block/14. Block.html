<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.2.1 (458835)"/><meta name="author" content="juntaozhi@163.com"/><meta name="created" content="2019-11-20 12:57:35 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-11-25 07:36:12 +0000"/><meta name="content-class" content="yinxiang.markdown"/><title>14. Block</title></head><body><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">一、 block的本质</h4>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">block本质上也是一个OC对象，它内部也有一个isa指针</li>
<li style="line-height: 160%; box-sizing: content-box;">block是封装了函数以及函数调用环境的OC对象</li>
<li style="line-height: 160%; box-sizing: content-box;">block的底层结构环境如图所示<br/>
<img src="14.%20Block.resources/WeWork%20Helper20191120091325.png" height="1116" width="1186"/></li>
<li style="line-height: 160%; box-sizing: content-box;">通过转化为c++代码可知：</li>
</ol>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">block的底层实现
struct __main_block_impl_2 {
  struct __block_impl impl;
  struct __main_block_desc_2* Desc;
  int number;
  __main_block_impl_2(void *fp, struct __main_block_desc_2 *desc, int _number, int flags=0) : number(_number) {
    impl.isa = &amp;_NSConcreteStackBlock;
    impl.Flags = flags;
    impl.FuncPtr = fp;
    Desc = desc;
  }
};

struct __block_impl {
  void *isa;
  int Flags;
  int Reserved;
  void *FuncPtr;
};

</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">二、 block底层数据结构</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">源码：</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191121055224.png" height="418" width="1086"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">转化为c++代码</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191121055052.png" height="598" width="2144"/><br/>
<img src="14.%20Block.resources/WeWork%20Helper20191121055134.png" height="508" width="1742"/><br/>
<img src="14.%20Block.resources/WeWork%20Helper20191121060933.png" height="538" width="2416"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">可以看出__main_block_impl_0是个结构体，block指向了该结构体。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">block的执行</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191121062309.png" height="1232" width="2450"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">三、 auto、static、register、extern关键字区别</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">auto、static、register、extern</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">以上四种都是说明符，因为C/C++语言在变量定义时候的完整语法是：<br/>
　　　　　[存储说明符] [数据类型] [变量名称] [=初始化];<br/>
　　因为大多我们声明的变量都是auto变量，而存储说明符默认即auto关键字，所以大多情况下我们省略了auto关键字。例如：<br/>
　　int nNum = 5;<br/>
　　实际定义的完整变量语句为：<br/>
　　auto int nNum =5;<br/>
<img src="14.%20Block.resources/WeWork%20Helper20191121093614.png" height="674" width="2210"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">3.1 区别</h5>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">auto自动变量：表明变量自动具有本地范围，在离开作用域，无论块作用域，文件作用域还是函数作用域，变量都会被程序隐藏或自动释放。然后等你重新进入该作用域，变量又重新被定义和调用。使用auto变量优势是无需考虑变量是否被释放。</li>
<li style="line-height: 160%; box-sizing: content-box;">static静态变量：简单说就是在函数等调用结束后，该变量也不会被释放，保存的值还保留。即它的生存期是永久的，直到程序运行结束，系统才会释放，但也无需手动释放。</li>
<li style="line-height: 160%; box-sizing: content-box;">register寄存器型变量：这个关键字要求编译器尽可能的将变量存储在CPU内部寄存器中，而不是通过内存寻址访问，以提高效率。但是这只是给系统的一个暗示，如果寄存器资源有限，系统也不会满足你的要求。register型变量存取速度比内存快很多，一般你在一些系统库文件，或诸如单片机官方接口库中使用较多，正常我们能用上较少。</li>
<li style="line-height: 160%; box-sizing: content-box;">extern外部变量：它属于变量声明，extern int a和int a的区别就是，前者告诉编译器，有一个int类型的变量a定义在其他地方，如果有调用请去其他文件中查找定义。</li>
</ol>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">3.2 总结和注意点</h5>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">关于extern变量声明使用，例如一个工程中：<br/>
　　　　Test1.cpp文件开头定义了int i =10; //定义了一个全局变量<br/>
　　　　Test2.cpp文件中定义：extern int i; //声明在另一个编译单元有i变量<br/>
注意：不可以写成extern int i =10，因为变量已经存在，不可以在声明时候赋初始值。</li>
<li style="line-height: 160%; box-sizing: content-box;">关于static和extern注意地方：<br/>
　　static静态变量虽然和整个程序共生存期，但是作用域还是需要看其定义的地方，当你在某个函数中定义一个变量，该变量作用域仅在该函数中。但你在文件开头定义一个全局变量，该变量作用域仅在该文件中。所以当你声明一个变量调用另一个文件静态变量，编译器会报错的。</li>
<li style="line-height: 160%; box-sizing: content-box;">extern声明尽量写在头文件中：<br/>
　　我们知道头文件只要是存放函数和变量声明的，所以用extern声明的变量也尽量写在头文件中，如果写在cpp文件中容易埋下苦果。</li>
<li style="line-height: 160%; box-sizing: content-box;">寄存器型变量快的原理：<br/>
　　CPU处理数据的过程是这样，数据是存放在内存当中，CPU从内存里面读取数据先要存放到寄存器中，然后CPU再从寄存器里读取数据来处理。处理完后同样把数据通过寄存器存放到内存里，也就是说CPU和内存数据交换之间存在一个寄存器，并不直接打交道。所以如果我们能够直接将数据存放在寄存器中，CPU存取数据就将快的多。</li>
</ol>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">四、block捕获static变量</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">以上研究了block对普通变量的捕获为直接赋值（基本类型）/copy(字符串类型)/等，对static静态变量捕获的是地址，所以外界修改static静态变量的值后，block引用的值也发送变化。<br/>
<img src="14.%20Block.resources/WeWork%20Helper20191121093225.png" height="546" width="2222"/><br/>
<img src="14.%20Block.resources/WeWork%20Helper20191121093340.png" height="294" width="2286"/><br/>
<img src="14.%20Block.resources/WeWork%20Helper20191121093614.png" height="674" width="2210"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">五、block捕获全局变量(不需要捕获)</h4>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">六、捕获的简单总结</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191121021858.png" height="324" width="1634"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">七、block对self的捕获</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">7.1 oc方法的底层实现</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191121024255.png" height="638" width="1670"/><br/>
<img src="14.%20Block.resources/WeWork%20Helper20191121024425.png" height="546" width="2306"/><br/>
oc方法默认会传递方法调用者self和方法名SEL _cmd</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">c语言方法默认不会传递任何参数</p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">7.2 block捕获self</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191121025352.png" height="340" width="1154"/><br/>
self作为局部变量，会被捕获，（全局变量不会被捕获）</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">- (void)test {
    
    void(^block)(void) = ^{
        ///block是否会捕获self?
        NSLog(@"%p",self);
        ///仍然会捕获self,_age 实际调用为self-&gt;_age;
        NSLog(@"%d",_age);
    };
    block();
}
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">八、block的类型</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">8.1 block继承自NSObject</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191121032548.png" height="1234" width="2584"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">8.2 block类型</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">NSGlobalBlock</strong> （ _NSConcreteGlobalBlock ）<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">NSStackBlock</strong> （ _NSConcreteStackBlock ）<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">NSMallocBlock</strong> （ _NSConcreteMallocBlock ）</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191121034043.png" height="758" width="1666"/></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">代码区（程序区域）、数据区（全局区、静态区）、堆区、栈区的区别</li>
</ul>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">代码区：存放程序编译后可以执行代码的地方。比如执行代码时写的While语句、if条件语句等，都会存放到此。</li>
<li style="line-height: 160%; box-sizing: content-box;">数据区：也称全局区或者静态区，根据名称我们就应该知道用来存放一些全局的东西，比如我们经常用到的静态变量、全局变量等都会存放到数据区，此区域上的东西都被全局所共享。</li>
<li style="line-height: 160%; box-sizing: content-box;">堆区：由程序员决定，在Java中，如果程序员不释放的话，一般会由垃圾回收机制自动的清理掉。此区域主要用来存放我们经常创建的对象、动态的申请的临时空间等。</li>
<li style="line-height: 160%; box-sizing: content-box;">栈区：由系统的编译器自动的释放，主要用来存放方法中的参数，一些临时的局部变量等，并且方法中的参数一般在操作完后，会由编译器自动的释放掉。</li>
</ol>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">8.3 block的类型判断</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191122055936.png" height="322" width="1244"/><br/>
<img src="14.%20Block.resources/WeWork%20Helper20191122062319.png" height="806" width="1648"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">每一种类型的block调用copy后的结果如下所示：<br/>
<img src="14.%20Block.resources/WeWork%20Helper20191122055952.png" height="304" width="1438"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">九、block的copy</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">9.1 在MRC环境下</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191122105805.png" height="1152" width="1858"/><br/>
<img src="14.%20Block.resources/WeWork%20Helper20191122110304.png" height="1200" width="2028"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">9.2 在ARC环境下，编译器会根据情况自动将栈上的block复制到堆上，比如以下情况</h5>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">block作为函数返回值时</li>
<li style="line-height: 160%; box-sizing: content-box;">将block赋值给__strong指针时</li>
<li style="line-height: 160%; box-sizing: content-box;">block作为Cocoa API中方法名含有usingBlock的方法参数时</li>
<li style="line-height: 160%; box-sizing: content-box;">block作为GCD API的方法参数时</li>
</ol>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">十、对象类型的auto变量</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">10.1 ARC下block对对象类型auto变量的引用</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191122031440.png" height="1048" width="1806"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">10.2 MRC下block对对象类型auto变量的引用</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/WeWork%20Helper20191122032302.png" height="804" width="1710"/><br/>
<img src="14.%20Block.resources/WeWork%20Helper20191122033620.png" height="948" width="1454"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">分析：由于block捕获了auto变量，所以该block类型为__NSStackBlock__,栈空间的block不会强持有auto变量，所有对象调用release之后直接释放。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">栈空间的block执行copy之后，block会被copy到堆上，会对auto变量强引用。<br/>
<img src="14.%20Block.resources/Xnip2019-11-22_17-46-48.jpg" height="2176" width="2422"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">十一、__block修饰符</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">11.1 block内部修改外部变量</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/Snip20191123_1.png" height="330" width="1512"/><br/>
为什么不能直接修改？<br/>
底层代码：<br/>
<img src="14.%20Block.resources/Snip20191123_2.png" height="364" width="2282"/><br/>
<img src="14.%20Block.resources/Snip20191123_3.png" height="218" width="2144"/><br/>
从内部实现代码可以看出：<br/>
__blockModifyVar_block_func_0函数修改blockModifyVar函数的内部变量，显然是不可能的。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">__block修饰符修改外部变量的过程</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/Snip20191123_6.png" height="394" width="972"/><br/>
<img src="14.%20Block.resources/Snip20191123_4.png" height="974" width="2382"/><br/>
<img src="14.%20Block.resources/Snip20191123_5.png" height="322" width="2072"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">注意：block内部修改外部变量，只有在修改变量的内存地址时候才需要添加__block，如下给数组添加元素，并没有修改数组的内存地址，所以不需要添加__block修饰。<br/>
<img src="14.%20Block.resources/Snip20191123_7.png" height="426" width="1048"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">十二、block对变量的引用总结</h4>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">当block拷贝到栈上时，对它们都不会产生强引用</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">当block拷贝到堆上时，都会通过copy函数来处理它们：</li>
</ul>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">当为oc对象时，取决于当初是如何访问的（weak【弱引用】还是strong【强引用】）</li>
<li style="line-height: 160%; box-sizing: content-box;">若是__block，则block会对变量强引用</li>
</ol>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">十三、__block的内存管理</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">13.1 __block的__forwarding指针</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/Snip20191125_1.png" height="1058" width="1472"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><a href="https://www.jianshu.com/p/ee9756f3d5f6" style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">深入研究Block捕获外部变量和__block实现原理</a></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">13.2 block捕获对象</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">block捕获外界对象时候，会自动将该对象包装为__Block_byref_p_2对象<br/>
<img src="14.%20Block.resources/Snip20191125_2.png" height="598" width="2286"/><br/>
包装后的对象：<br/>
<img src="14.%20Block.resources/Snip20191125_3.png" height="462" width="1330"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">13.3 block的循环引用</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="14.%20Block.resources/Snip20191125_4.png" height="718" width="1238"/></p>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">block造成循环引用的原因：<br/>
block对auto变量（Person *p）默认是强引用<br/>
Person *p 对象对该block也是强引用<br/>
造成了循环引用<br/>
<img src="14.%20Block.resources/Snip20191125_6.png" height="504" width="2286"/></p>
</li>
<li style="line-height: 160%; box-sizing: content-box;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">解决循环引用<br/>
__weak 关键字解决（推荐）<br/>
<img src="14.%20Block.resources/Snip20191125_7.png" height="602" width="1194"/><br/>
__unsafe_unretained关键字解决（不推荐）<br/>
<img src="14.%20Block.resources/Snip20191125_10.png" height="630" width="1604"/><br/>
__weak 和 __unsafe_unretained区别：</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">__weak不会产生强引用，指向的对象销毁时，会自动让指针置为nil</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">__unsafe_unretained不会产生强引用，不安全，指向的对象销毁时，指针存储的地址值不变</li>
</ul>
</li>
</ol>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%20%23%23%23%23%20%E4%B8%80%E3%80%81%20block%E7%9A%84%E6%9C%AC%E8%B4%A8%0A%20%0A%0A1.%20%20block%E6%9C%AC%E8%B4%A8%E4%B8%8A%E4%B9%9F%E6%98%AF%E4%B8%80%E4%B8%AAOC%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AE%83%E5%86%85%E9%83%A8%E4%B9%9F%E6%9C%89%E4%B8%80%E4%B8%AAisa%E6%8C%87%E9%92%88%0A2.%20%20block%E6%98%AF%E5%B0%81%E8%A3%85%E4%BA%86%E5%87%BD%E6%95%B0%E4%BB%A5%E5%8F%8A%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E7%8E%AF%E5%A2%83%E7%9A%84OC%E5%AF%B9%E8%B1%A1%0A3.%20%20block%E7%9A%84%E5%BA%95%E5%B1%82%E7%BB%93%E6%9E%84%E7%8E%AF%E5%A2%83%E5%A6%82%E5%9B%BE%E6%89%80%E7%A4%BA%0A!%5Bd03fe82893cd2f50d38314d0c44b1c1b.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3067)%0A4.%20%20%E9%80%9A%E8%BF%87%E8%BD%AC%E5%8C%96%E4%B8%BAc%2B%2B%E4%BB%A3%E7%A0%81%E5%8F%AF%E7%9F%A5%EF%BC%9A%0A%60%60%60%0Ablock%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%0Astruct%20__main_block_impl_2%20%7B%0A%20%20struct%20__block_impl%20impl%3B%0A%20%20struct%20__main_block_desc_2*%20Desc%3B%0A%20%20int%20number%3B%0A%20%20__main_block_impl_2(void%20*fp%2C%20struct%20__main_block_desc_2%20*desc%2C%20int%20_number%2C%20int%20flags%3D0)%20%3A%20number(_number)%20%7B%0A%20%20%20%20impl.isa%20%3D%20%26_NSConcreteStackBlock%3B%0A%20%20%20%20impl.Flags%20%3D%20flags%3B%0A%20%20%20%20impl.FuncPtr%20%3D%20fp%3B%0A%20%20%20%20Desc%20%3D%20desc%3B%0A%20%20%7D%0A%7D%3B%0A%0Astruct%20__block_impl%20%7B%0A%20%20void%20*isa%3B%0A%20%20int%20Flags%3B%0A%20%20int%20Reserved%3B%0A%20%20void%20*FuncPtr%3B%0A%7D%3B%0A%0A%60%60%60%0A%0A%23%23%23%23%20%E4%BA%8C%E3%80%81%20block%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%0A%0A%E6%BA%90%E7%A0%81%EF%BC%9A%0A%0A!%5B0c0d584e9c7a83cf7a7925c2a39a58be.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3069)%0A%0A%0A%E8%BD%AC%E5%8C%96%E4%B8%BAc%2B%2B%E4%BB%A3%E7%A0%81%0A%0A!%5Bd11922b303e348ec4bfa7e0a429aef7e.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3070)%0A!%5Bd967a90bab3de8c3b2114c99a2c4ff14.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3071)%0A!%5B54d30f06e6d62a430fec0880428ec8dc.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3072)%0A%0A%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%87%BA__main_block_impl_0%E6%98%AF%E4%B8%AA%E7%BB%93%E6%9E%84%E4%BD%93%EF%BC%8Cblock%E6%8C%87%E5%90%91%E4%BA%86%E8%AF%A5%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%82%0A%0Ablock%E7%9A%84%E6%89%A7%E8%A1%8C%0A%0A!%5Bc3529738e9e3d43e08785fae2e8cb3aa.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3073)%0A%0A%0A%23%23%23%23%20%E4%B8%89%E3%80%81%20auto%E3%80%81static%E3%80%81register%E3%80%81extern%E5%85%B3%E9%94%AE%E5%AD%97%E5%8C%BA%E5%88%AB%0A%0A%23%23%23%23%23%20auto%E3%80%81static%E3%80%81register%E3%80%81extern%0A%0A%E4%BB%A5%E4%B8%8A%E5%9B%9B%E7%A7%8D%E9%83%BD%E6%98%AF%E8%AF%B4%E6%98%8E%E7%AC%A6%EF%BC%8C%E5%9B%A0%E4%B8%BAC%2FC%2B%2B%E8%AF%AD%E8%A8%80%E5%9C%A8%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89%E6%97%B6%E5%80%99%E7%9A%84%E5%AE%8C%E6%95%B4%E8%AF%AD%E6%B3%95%E6%98%AF%EF%BC%9A%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80%E3%80%80%5B%E5%AD%98%E5%82%A8%E8%AF%B4%E6%98%8E%E7%AC%A6%5D%20%5B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%5D%20%5B%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%5D%20%5B%3D%E5%88%9D%E5%A7%8B%E5%8C%96%5D%3B%0A%E3%80%80%E3%80%80%E5%9B%A0%E4%B8%BA%E5%A4%A7%E5%A4%9A%E6%88%91%E4%BB%AC%E5%A3%B0%E6%98%8E%E7%9A%84%E5%8F%98%E9%87%8F%E9%83%BD%E6%98%AFauto%E5%8F%98%E9%87%8F%EF%BC%8C%E8%80%8C%E5%AD%98%E5%82%A8%E8%AF%B4%E6%98%8E%E7%AC%A6%E9%BB%98%E8%AE%A4%E5%8D%B3auto%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%8C%E6%89%80%E4%BB%A5%E5%A4%A7%E5%A4%9A%E6%83%85%E5%86%B5%E4%B8%8B%E6%88%91%E4%BB%AC%E7%9C%81%E7%95%A5%E4%BA%86auto%E5%85%B3%E9%94%AE%E5%AD%97%E3%80%82%E4%BE%8B%E5%A6%82%EF%BC%9A%0A%E3%80%80%E3%80%80int%20nNum%20%3D%205%3B%0A%E3%80%80%E3%80%80%E5%AE%9E%E9%99%85%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AE%8C%E6%95%B4%E5%8F%98%E9%87%8F%E8%AF%AD%E5%8F%A5%E4%B8%BA%EF%BC%9A%0A%E3%80%80%E3%80%80auto%20int%20nNum%20%3D5%3B%0A!%5Bc0c08a2c8385c76da5b99002434c5be9.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3076)%0A%0A%23%23%23%23%23%203.1%20%E5%8C%BA%E5%88%AB%0A1.%20auto%E8%87%AA%E5%8A%A8%E5%8F%98%E9%87%8F%EF%BC%9A%E8%A1%A8%E6%98%8E%E5%8F%98%E9%87%8F%E8%87%AA%E5%8A%A8%E5%85%B7%E6%9C%89%E6%9C%AC%E5%9C%B0%E8%8C%83%E5%9B%B4%EF%BC%8C%E5%9C%A8%E7%A6%BB%E5%BC%80%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%8C%E6%97%A0%E8%AE%BA%E5%9D%97%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%8C%E6%96%87%E4%BB%B6%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%BF%98%E6%98%AF%E5%87%BD%E6%95%B0%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%8C%E5%8F%98%E9%87%8F%E9%83%BD%E4%BC%9A%E8%A2%AB%E7%A8%8B%E5%BA%8F%E9%9A%90%E8%97%8F%E6%88%96%E8%87%AA%E5%8A%A8%E9%87%8A%E6%94%BE%E3%80%82%E7%84%B6%E5%90%8E%E7%AD%89%E4%BD%A0%E9%87%8D%E6%96%B0%E8%BF%9B%E5%85%A5%E8%AF%A5%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%8C%E5%8F%98%E9%87%8F%E5%8F%88%E9%87%8D%E6%96%B0%E8%A2%AB%E5%AE%9A%E4%B9%89%E5%92%8C%E8%B0%83%E7%94%A8%E3%80%82%E4%BD%BF%E7%94%A8auto%E5%8F%98%E9%87%8F%E4%BC%98%E5%8A%BF%E6%98%AF%E6%97%A0%E9%9C%80%E8%80%83%E8%99%91%E5%8F%98%E9%87%8F%E6%98%AF%E5%90%A6%E8%A2%AB%E9%87%8A%E6%94%BE%E3%80%82%0A2.%20%20static%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%EF%BC%9A%E7%AE%80%E5%8D%95%E8%AF%B4%E5%B0%B1%E6%98%AF%E5%9C%A8%E5%87%BD%E6%95%B0%E7%AD%89%E8%B0%83%E7%94%A8%E7%BB%93%E6%9D%9F%E5%90%8E%EF%BC%8C%E8%AF%A5%E5%8F%98%E9%87%8F%E4%B9%9F%E4%B8%8D%E4%BC%9A%E8%A2%AB%E9%87%8A%E6%94%BE%EF%BC%8C%E4%BF%9D%E5%AD%98%E7%9A%84%E5%80%BC%E8%BF%98%E4%BF%9D%E7%95%99%E3%80%82%E5%8D%B3%E5%AE%83%E7%9A%84%E7%94%9F%E5%AD%98%E6%9C%9F%E6%98%AF%E6%B0%B8%E4%B9%85%E7%9A%84%EF%BC%8C%E7%9B%B4%E5%88%B0%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9D%9F%EF%BC%8C%E7%B3%BB%E7%BB%9F%E6%89%8D%E4%BC%9A%E9%87%8A%E6%94%BE%EF%BC%8C%E4%BD%86%E4%B9%9F%E6%97%A0%E9%9C%80%E6%89%8B%E5%8A%A8%E9%87%8A%E6%94%BE%E3%80%82%0A3.%20register%E5%AF%84%E5%AD%98%E5%99%A8%E5%9E%8B%E5%8F%98%E9%87%8F%EF%BC%9A%E8%BF%99%E4%B8%AA%E5%85%B3%E9%94%AE%E5%AD%97%E8%A6%81%E6%B1%82%E7%BC%96%E8%AF%91%E5%99%A8%E5%B0%BD%E5%8F%AF%E8%83%BD%E7%9A%84%E5%B0%86%E5%8F%98%E9%87%8F%E5%AD%98%E5%82%A8%E5%9C%A8CPU%E5%86%85%E9%83%A8%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%AD%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E9%80%9A%E8%BF%87%E5%86%85%E5%AD%98%E5%AF%BB%E5%9D%80%E8%AE%BF%E9%97%AE%EF%BC%8C%E4%BB%A5%E6%8F%90%E9%AB%98%E6%95%88%E7%8E%87%E3%80%82%E4%BD%86%E6%98%AF%E8%BF%99%E5%8F%AA%E6%98%AF%E7%BB%99%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%80%E4%B8%AA%E6%9A%97%E7%A4%BA%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%AF%84%E5%AD%98%E5%99%A8%E8%B5%84%E6%BA%90%E6%9C%89%E9%99%90%EF%BC%8C%E7%B3%BB%E7%BB%9F%E4%B9%9F%E4%B8%8D%E4%BC%9A%E6%BB%A1%E8%B6%B3%E4%BD%A0%E7%9A%84%E8%A6%81%E6%B1%82%E3%80%82register%E5%9E%8B%E5%8F%98%E9%87%8F%E5%AD%98%E5%8F%96%E9%80%9F%E5%BA%A6%E6%AF%94%E5%86%85%E5%AD%98%E5%BF%AB%E5%BE%88%E5%A4%9A%EF%BC%8C%E4%B8%80%E8%88%AC%E4%BD%A0%E5%9C%A8%E4%B8%80%E4%BA%9B%E7%B3%BB%E7%BB%9F%E5%BA%93%E6%96%87%E4%BB%B6%EF%BC%8C%E6%88%96%E8%AF%B8%E5%A6%82%E5%8D%95%E7%89%87%E6%9C%BA%E5%AE%98%E6%96%B9%E6%8E%A5%E5%8F%A3%E5%BA%93%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%BE%83%E5%A4%9A%EF%BC%8C%E6%AD%A3%E5%B8%B8%E6%88%91%E4%BB%AC%E8%83%BD%E7%94%A8%E4%B8%8A%E8%BE%83%E5%B0%91%E3%80%82%0A4.%20extern%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F%EF%BC%9A%E5%AE%83%E5%B1%9E%E4%BA%8E%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%EF%BC%8Cextern%20int%20a%E5%92%8Cint%20a%E7%9A%84%E5%8C%BA%E5%88%AB%E5%B0%B1%E6%98%AF%EF%BC%8C%E5%89%8D%E8%80%85%E5%91%8A%E8%AF%89%E7%BC%96%E8%AF%91%E5%99%A8%EF%BC%8C%E6%9C%89%E4%B8%80%E4%B8%AAint%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%98%E9%87%8Fa%E5%AE%9A%E4%B9%89%E5%9C%A8%E5%85%B6%E4%BB%96%E5%9C%B0%E6%96%B9%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%89%E8%B0%83%E7%94%A8%E8%AF%B7%E5%8E%BB%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6%E4%B8%AD%E6%9F%A5%E6%89%BE%E5%AE%9A%E4%B9%89%E3%80%82%0A%20%20%0A%23%23%23%23%23%203.2%20%E6%80%BB%E7%BB%93%E5%92%8C%E6%B3%A8%E6%84%8F%E7%82%B9%0A%0A1.%20%E5%85%B3%E4%BA%8Eextern%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E4%BD%BF%E7%94%A8%EF%BC%8C%E4%BE%8B%E5%A6%82%E4%B8%80%E4%B8%AA%E5%B7%A5%E7%A8%8B%E4%B8%AD%EF%BC%9A%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80Test1.cpp%E6%96%87%E4%BB%B6%E5%BC%80%E5%A4%B4%E5%AE%9A%E4%B9%89%E4%BA%86int%20i%20%3D10%3B%20%2F%2F%E5%AE%9A%E4%B9%89%E4%BA%86%E4%B8%80%E4%B8%AA%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80Test2.cpp%E6%96%87%E4%BB%B6%E4%B8%AD%E5%AE%9A%E4%B9%89%EF%BC%9Aextern%20int%20i%3B%20%2F%2F%E5%A3%B0%E6%98%8E%E5%9C%A8%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%BC%96%E8%AF%91%E5%8D%95%E5%85%83%E6%9C%89i%E5%8F%98%E9%87%8F%0A%E6%B3%A8%E6%84%8F%EF%BC%9A%E4%B8%8D%E5%8F%AF%E4%BB%A5%E5%86%99%E6%88%90extern%20int%20i%20%3D10%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%8F%98%E9%87%8F%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%EF%BC%8C%E4%B8%8D%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%A3%B0%E6%98%8E%E6%97%B6%E5%80%99%E8%B5%8B%E5%88%9D%E5%A7%8B%E5%80%BC%E3%80%82%0A2.%20%E5%85%B3%E4%BA%8Estatic%E5%92%8Cextern%E6%B3%A8%E6%84%8F%E5%9C%B0%E6%96%B9%EF%BC%9A%0A%E3%80%80%E3%80%80static%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E8%99%BD%E7%84%B6%E5%92%8C%E6%95%B4%E4%B8%AA%E7%A8%8B%E5%BA%8F%E5%85%B1%E7%94%9F%E5%AD%98%E6%9C%9F%EF%BC%8C%E4%BD%86%E6%98%AF%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%BF%98%E6%98%AF%E9%9C%80%E8%A6%81%E7%9C%8B%E5%85%B6%E5%AE%9A%E4%B9%89%E7%9A%84%E5%9C%B0%E6%96%B9%EF%BC%8C%E5%BD%93%E4%BD%A0%E5%9C%A8%E6%9F%90%E4%B8%AA%E5%87%BD%E6%95%B0%E4%B8%AD%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%EF%BC%8C%E8%AF%A5%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%BB%85%E5%9C%A8%E8%AF%A5%E5%87%BD%E6%95%B0%E4%B8%AD%E3%80%82%E4%BD%86%E4%BD%A0%E5%9C%A8%E6%96%87%E4%BB%B6%E5%BC%80%E5%A4%B4%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%EF%BC%8C%E8%AF%A5%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%BB%85%E5%9C%A8%E8%AF%A5%E6%96%87%E4%BB%B6%E4%B8%AD%E3%80%82%E6%89%80%E4%BB%A5%E5%BD%93%E4%BD%A0%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E8%B0%83%E7%94%A8%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%EF%BC%8C%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%9A%E6%8A%A5%E9%94%99%E7%9A%84%E3%80%82%0A3.%20extern%E5%A3%B0%E6%98%8E%E5%B0%BD%E9%87%8F%E5%86%99%E5%9C%A8%E5%A4%B4%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%9A%0A%E3%80%80%E3%80%80%E6%88%91%E4%BB%AC%E7%9F%A5%E9%81%93%E5%A4%B4%E6%96%87%E4%BB%B6%E5%8F%AA%E8%A6%81%E6%98%AF%E5%AD%98%E6%94%BE%E5%87%BD%E6%95%B0%E5%92%8C%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E7%94%A8extern%E5%A3%B0%E6%98%8E%E7%9A%84%E5%8F%98%E9%87%8F%E4%B9%9F%E5%B0%BD%E9%87%8F%E5%86%99%E5%9C%A8%E5%A4%B4%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%86%99%E5%9C%A8cpp%E6%96%87%E4%BB%B6%E4%B8%AD%E5%AE%B9%E6%98%93%E5%9F%8B%E4%B8%8B%E8%8B%A6%E6%9E%9C%E3%80%82%0A4.%20%E5%AF%84%E5%AD%98%E5%99%A8%E5%9E%8B%E5%8F%98%E9%87%8F%E5%BF%AB%E7%9A%84%E5%8E%9F%E7%90%86%EF%BC%9A%0A%E3%80%80%E3%80%80CPU%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E7%9A%84%E8%BF%87%E7%A8%8B%E6%98%AF%E8%BF%99%E6%A0%B7%EF%BC%8C%E6%95%B0%E6%8D%AE%E6%98%AF%E5%AD%98%E6%94%BE%E5%9C%A8%E5%86%85%E5%AD%98%E5%BD%93%E4%B8%AD%EF%BC%8CCPU%E4%BB%8E%E5%86%85%E5%AD%98%E9%87%8C%E9%9D%A2%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E5%85%88%E8%A6%81%E5%AD%98%E6%94%BE%E5%88%B0%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%AD%EF%BC%8C%E7%84%B6%E5%90%8ECPU%E5%86%8D%E4%BB%8E%E5%AF%84%E5%AD%98%E5%99%A8%E9%87%8C%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E6%9D%A5%E5%A4%84%E7%90%86%E3%80%82%E5%A4%84%E7%90%86%E5%AE%8C%E5%90%8E%E5%90%8C%E6%A0%B7%E6%8A%8A%E6%95%B0%E6%8D%AE%E9%80%9A%E8%BF%87%E5%AF%84%E5%AD%98%E5%99%A8%E5%AD%98%E6%94%BE%E5%88%B0%E5%86%85%E5%AD%98%E9%87%8C%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4CPU%E5%92%8C%E5%86%85%E5%AD%98%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E4%B9%8B%E9%97%B4%E5%AD%98%E5%9C%A8%E4%B8%80%E4%B8%AA%E5%AF%84%E5%AD%98%E5%99%A8%EF%BC%8C%E5%B9%B6%E4%B8%8D%E7%9B%B4%E6%8E%A5%E6%89%93%E4%BA%A4%E9%81%93%E3%80%82%E6%89%80%E4%BB%A5%E5%A6%82%E6%9E%9C%E6%88%91%E4%BB%AC%E8%83%BD%E5%A4%9F%E7%9B%B4%E6%8E%A5%E5%B0%86%E6%95%B0%E6%8D%AE%E5%AD%98%E6%94%BE%E5%9C%A8%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%AD%EF%BC%8CCPU%E5%AD%98%E5%8F%96%E6%95%B0%E6%8D%AE%E5%B0%B1%E5%B0%86%E5%BF%AB%E7%9A%84%E5%A4%9A%E3%80%82%0A%20%20%0A%23%23%23%23%20%E5%9B%9B%E3%80%81block%E6%8D%95%E8%8E%B7static%E5%8F%98%E9%87%8F%0A%0A%E4%BB%A5%E4%B8%8A%E7%A0%94%E7%A9%B6%E4%BA%86block%E5%AF%B9%E6%99%AE%E9%80%9A%E5%8F%98%E9%87%8F%E7%9A%84%E6%8D%95%E8%8E%B7%E4%B8%BA%E7%9B%B4%E6%8E%A5%E8%B5%8B%E5%80%BC%EF%BC%88%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%EF%BC%89%2Fcopy(%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B)%2F%E7%AD%89%EF%BC%8C%E5%AF%B9static%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E6%8D%95%E8%8E%B7%E7%9A%84%E6%98%AF%E5%9C%B0%E5%9D%80%EF%BC%8C%E6%89%80%E4%BB%A5%E5%A4%96%E7%95%8C%E4%BF%AE%E6%94%B9static%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC%E5%90%8E%EF%BC%8Cblock%E5%BC%95%E7%94%A8%E7%9A%84%E5%80%BC%E4%B9%9F%E5%8F%91%E9%80%81%E5%8F%98%E5%8C%96%E3%80%82%0A!%5Bed9a8cf1e8e760467ce3a29fe1a5a194.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3074)%0A!%5B570e99dbb597d1fdcdde93cba17f1e29.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3075)%0A!%5Bc0c08a2c8385c76da5b99002434c5be9.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3076)%0A%0A%23%23%23%23%20%E4%BA%94%E3%80%81block%E6%8D%95%E8%8E%B7%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F(%E4%B8%8D%E9%9C%80%E8%A6%81%E6%8D%95%E8%8E%B7)%0A%0A%23%23%23%23%20%E5%85%AD%E3%80%81%E6%8D%95%E8%8E%B7%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93%0A%0A!%5B5e13cefc58a294ad9af9a9335394957f.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3077)%0A%0A%23%23%23%23%20%E4%B8%83%E3%80%81block%E5%AF%B9self%E7%9A%84%E6%8D%95%E8%8E%B7%0A%0A%23%23%23%23%23%207.1%20oc%E6%96%B9%E6%B3%95%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%0A!%5B5cb2d92a090757feb269d753898b1f94.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3078)%0A!%5B8b6a20a43c027662093aff558e4b5f72.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3079)%0Aoc%E6%96%B9%E6%B3%95%E9%BB%98%E8%AE%A4%E4%BC%9A%E4%BC%A0%E9%80%92%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E8%80%85self%E5%92%8C%E6%96%B9%E6%B3%95%E5%90%8DSEL%20_cmd%0A%0Ac%E8%AF%AD%E8%A8%80%E6%96%B9%E6%B3%95%E9%BB%98%E8%AE%A4%E4%B8%8D%E4%BC%9A%E4%BC%A0%E9%80%92%E4%BB%BB%E4%BD%95%E5%8F%82%E6%95%B0%0A%0A%23%23%23%23%23%207.2%20block%E6%8D%95%E8%8E%B7self%0A!%5B99109005170c14be66f3f0deefbfb801.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3080)%0Aself%E4%BD%9C%E4%B8%BA%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E4%BC%9A%E8%A2%AB%E6%8D%95%E8%8E%B7%EF%BC%8C%EF%BC%88%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E4%B8%8D%E4%BC%9A%E8%A2%AB%E6%8D%95%E8%8E%B7%EF%BC%89%0A%60%60%60%0A-%20(void)test%20%7B%0A%20%20%20%20%0A%20%20%20%20void(%5Eblock)(void)%20%3D%20%5E%7B%0A%20%20%20%20%20%20%20%20%2F%2F%2Fblock%E6%98%AF%E5%90%A6%E4%BC%9A%E6%8D%95%E8%8E%B7self%3F%0A%20%20%20%20%20%20%20%20NSLog(%40%22%25p%22%2Cself)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%2F%E4%BB%8D%E7%84%B6%E4%BC%9A%E6%8D%95%E8%8E%B7self%2C_age%20%E5%AE%9E%E9%99%85%E8%B0%83%E7%94%A8%E4%B8%BAself-%3E_age%3B%0A%20%20%20%20%20%20%20%20NSLog(%40%22%25d%22%2C_age)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20block()%3B%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20%E5%85%AB%E3%80%81block%E7%9A%84%E7%B1%BB%E5%9E%8B%0A%0A%23%23%23%23%23%208.1%20block%E7%BB%A7%E6%89%BF%E8%87%AANSObject%0A!%5Ba6c443552a8cd3bb20e9367a0684d977.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3081)%0A%0A%23%23%23%23%23%208.2%20block%E7%B1%BB%E5%9E%8B%0A%0A__NSGlobalBlock__%20%EF%BC%88%20_NSConcreteGlobalBlock%20%EF%BC%89%0A__NSStackBlock__%20%EF%BC%88%20_NSConcreteStackBlock%20%EF%BC%89%0A__NSMallocBlock__%20%EF%BC%88%20_NSConcreteMallocBlock%20%EF%BC%89%0A%0A!%5B93c58cd61a1cc510704bc41d62484aff.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3082)%0A%0A*%20%E4%BB%A3%E7%A0%81%E5%8C%BA%EF%BC%88%E7%A8%8B%E5%BA%8F%E5%8C%BA%E5%9F%9F%EF%BC%89%E3%80%81%E6%95%B0%E6%8D%AE%E5%8C%BA%EF%BC%88%E5%85%A8%E5%B1%80%E5%8C%BA%E3%80%81%E9%9D%99%E6%80%81%E5%8C%BA%EF%BC%89%E3%80%81%E5%A0%86%E5%8C%BA%E3%80%81%E6%A0%88%E5%8C%BA%E7%9A%84%E5%8C%BA%E5%88%AB%0A1.%20%E4%BB%A3%E7%A0%81%E5%8C%BA%EF%BC%9A%E5%AD%98%E6%94%BE%E7%A8%8B%E5%BA%8F%E7%BC%96%E8%AF%91%E5%90%8E%E5%8F%AF%E4%BB%A5%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%E7%9A%84%E5%9C%B0%E6%96%B9%E3%80%82%E6%AF%94%E5%A6%82%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%E6%97%B6%E5%86%99%E7%9A%84While%E8%AF%AD%E5%8F%A5%E3%80%81if%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5%E7%AD%89%EF%BC%8C%E9%83%BD%E4%BC%9A%E5%AD%98%E6%94%BE%E5%88%B0%E6%AD%A4%E3%80%82%0A2.%20%E6%95%B0%E6%8D%AE%E5%8C%BA%EF%BC%9A%E4%B9%9F%E7%A7%B0%E5%85%A8%E5%B1%80%E5%8C%BA%E6%88%96%E8%80%85%E9%9D%99%E6%80%81%E5%8C%BA%EF%BC%8C%E6%A0%B9%E6%8D%AE%E5%90%8D%E7%A7%B0%E6%88%91%E4%BB%AC%E5%B0%B1%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%94%A8%E6%9D%A5%E5%AD%98%E6%94%BE%E4%B8%80%E4%BA%9B%E5%85%A8%E5%B1%80%E7%9A%84%E4%B8%9C%E8%A5%BF%EF%BC%8C%E6%AF%94%E5%A6%82%E6%88%91%E4%BB%AC%E7%BB%8F%E5%B8%B8%E7%94%A8%E5%88%B0%E7%9A%84%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E3%80%81%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E7%AD%89%E9%83%BD%E4%BC%9A%E5%AD%98%E6%94%BE%E5%88%B0%E6%95%B0%E6%8D%AE%E5%8C%BA%EF%BC%8C%E6%AD%A4%E5%8C%BA%E5%9F%9F%E4%B8%8A%E7%9A%84%E4%B8%9C%E8%A5%BF%E9%83%BD%E8%A2%AB%E5%85%A8%E5%B1%80%E6%89%80%E5%85%B1%E4%BA%AB%E3%80%82%0A3.%20%E5%A0%86%E5%8C%BA%EF%BC%9A%E7%94%B1%E7%A8%8B%E5%BA%8F%E5%91%98%E5%86%B3%E5%AE%9A%EF%BC%8C%E5%9C%A8Java%E4%B8%AD%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%A8%8B%E5%BA%8F%E5%91%98%E4%B8%8D%E9%87%8A%E6%94%BE%E7%9A%84%E8%AF%9D%EF%BC%8C%E4%B8%80%E8%88%AC%E4%BC%9A%E7%94%B1%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6%E8%87%AA%E5%8A%A8%E7%9A%84%E6%B8%85%E7%90%86%E6%8E%89%E3%80%82%E6%AD%A4%E5%8C%BA%E5%9F%9F%E4%B8%BB%E8%A6%81%E7%94%A8%E6%9D%A5%E5%AD%98%E6%94%BE%E6%88%91%E4%BB%AC%E7%BB%8F%E5%B8%B8%E5%88%9B%E5%BB%BA%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%81%E5%8A%A8%E6%80%81%E7%9A%84%E7%94%B3%E8%AF%B7%E7%9A%84%E4%B8%B4%E6%97%B6%E7%A9%BA%E9%97%B4%E7%AD%89%E3%80%82%0A4.%20%E6%A0%88%E5%8C%BA%EF%BC%9A%E7%94%B1%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BC%96%E8%AF%91%E5%99%A8%E8%87%AA%E5%8A%A8%E7%9A%84%E9%87%8A%E6%94%BE%EF%BC%8C%E4%B8%BB%E8%A6%81%E7%94%A8%E6%9D%A5%E5%AD%98%E6%94%BE%E6%96%B9%E6%B3%95%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%8C%E4%B8%80%E4%BA%9B%E4%B8%B4%E6%97%B6%E7%9A%84%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%AD%89%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%96%B9%E6%B3%95%E4%B8%AD%E7%9A%84%E5%8F%82%E6%95%B0%E4%B8%80%E8%88%AC%E5%9C%A8%E6%93%8D%E4%BD%9C%E5%AE%8C%E5%90%8E%EF%BC%8C%E4%BC%9A%E7%94%B1%E7%BC%96%E8%AF%91%E5%99%A8%E8%87%AA%E5%8A%A8%E7%9A%84%E9%87%8A%E6%94%BE%E6%8E%89%E3%80%82%0A%0A%0A%23%23%23%23%23%208.3%20block%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD%0A%0A!%5Be69472e40479a3d7a886ea847d98e610.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3083)%0A!%5Bd02789dd33a16c8cb949d8b115fcb13f.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3085)%0A%0A%E6%AF%8F%E4%B8%80%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84block%E8%B0%83%E7%94%A8copy%E5%90%8E%E7%9A%84%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A%0A!%5Bc689e1ff2dff83b598d5d9b2d071c1fa.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3084)%0A%0A%0A%0A%23%23%23%23%20%E4%B9%9D%E3%80%81block%E7%9A%84copy%0A%0A%23%23%23%23%23%209.1%20%E5%9C%A8MRC%E7%8E%AF%E5%A2%83%E4%B8%8B%0A%0A!%5B94dc53d83715716af8de35832ac490a8.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3087)%0A!%5Be80127db781aded49f7039af9ecbfcdf.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3089)%0A%0A%0A%0A%23%23%23%23%23%209.2%20%E5%9C%A8ARC%E7%8E%AF%E5%A2%83%E4%B8%8B%EF%BC%8C%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%9A%E6%A0%B9%E6%8D%AE%E6%83%85%E5%86%B5%E8%87%AA%E5%8A%A8%E5%B0%86%E6%A0%88%E4%B8%8A%E7%9A%84block%E5%A4%8D%E5%88%B6%E5%88%B0%E5%A0%86%E4%B8%8A%EF%BC%8C%E6%AF%94%E5%A6%82%E4%BB%A5%E4%B8%8B%E6%83%85%E5%86%B5%0A%0A1.%20block%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC%E6%97%B6%0A2.%20%E5%B0%86block%E8%B5%8B%E5%80%BC%E7%BB%99__strong%E6%8C%87%E9%92%88%E6%97%B6%0A3.%20block%E4%BD%9C%E4%B8%BACocoa%20API%E4%B8%AD%E6%96%B9%E6%B3%95%E5%90%8D%E5%90%AB%E6%9C%89usingBlock%E7%9A%84%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E6%97%B6%0A4.%20block%E4%BD%9C%E4%B8%BAGCD%20API%E7%9A%84%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E6%97%B6%0A%0A%23%23%23%23%20%E5%8D%81%E3%80%81%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84auto%E5%8F%98%E9%87%8F%0A%0A%23%23%23%23%23%2010.1%20ARC%E4%B8%8Bblock%E5%AF%B9%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8Bauto%E5%8F%98%E9%87%8F%E7%9A%84%E5%BC%95%E7%94%A8%0A!%5Bc27cb3f9f8ca33fa49519f99ed39405b.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3090)%0A%23%23%23%23%23%2010.2%20MRC%E4%B8%8Bblock%E5%AF%B9%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8Bauto%E5%8F%98%E9%87%8F%E7%9A%84%E5%BC%95%E7%94%A8%0A!%5B181fddcd9963e6a7e501d59054ba5e11.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3091)%0A!%5B5a4af1a90092f2c316254fef3c688850.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3092)%0A%0A%E5%88%86%E6%9E%90%EF%BC%9A%E7%94%B1%E4%BA%8Eblock%E6%8D%95%E8%8E%B7%E4%BA%86auto%E5%8F%98%E9%87%8F%EF%BC%8C%E6%89%80%E4%BB%A5%E8%AF%A5block%E7%B1%BB%E5%9E%8B%E4%B8%BA__NSStackBlock__%2C%E6%A0%88%E7%A9%BA%E9%97%B4%E7%9A%84block%E4%B8%8D%E4%BC%9A%E5%BC%BA%E6%8C%81%E6%9C%89auto%E5%8F%98%E9%87%8F%EF%BC%8C%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E8%B0%83%E7%94%A8release%E4%B9%8B%E5%90%8E%E7%9B%B4%E6%8E%A5%E9%87%8A%E6%94%BE%E3%80%82%0A%0A%E6%A0%88%E7%A9%BA%E9%97%B4%E7%9A%84block%E6%89%A7%E8%A1%8Ccopy%E4%B9%8B%E5%90%8E%EF%BC%8Cblock%E4%BC%9A%E8%A2%ABcopy%E5%88%B0%E5%A0%86%E4%B8%8A%EF%BC%8C%E4%BC%9A%E5%AF%B9auto%E5%8F%98%E9%87%8F%E5%BC%BA%E5%BC%95%E7%94%A8%E3%80%82%0A!%5B063fcf23830212d36d48e9e8d20a899d.jpeg%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3093)%0A%0A%23%23%23%23%20%E5%8D%81%E4%B8%80%E3%80%81__block%E4%BF%AE%E9%A5%B0%E7%AC%A6%0A%0A%23%23%23%23%23%2011.1%20block%E5%86%85%E9%83%A8%E4%BF%AE%E6%94%B9%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F%0A%0A!%5B10a7094e8792cd2b2a007a13b2227a10.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3094)%0A%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E4%BF%AE%E6%94%B9%EF%BC%9F%0A%E5%BA%95%E5%B1%82%E4%BB%A3%E7%A0%81%EF%BC%9A%0A!%5B926b702df3e85f2ba99deb21aee1fecd.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3095)%0A!%5Bbf94706aa716e6ca096288a7fc388512.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3096)%0A%E4%BB%8E%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%87%BA%EF%BC%9A%0A__blockModifyVar_block_func_0%E5%87%BD%E6%95%B0%E4%BF%AE%E6%94%B9blockModifyVar%E5%87%BD%E6%95%B0%E7%9A%84%E5%86%85%E9%83%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E6%98%BE%E7%84%B6%E6%98%AF%E4%B8%8D%E5%8F%AF%E8%83%BD%E7%9A%84%E3%80%82%0A%0A__block%E4%BF%AE%E9%A5%B0%E7%AC%A6%E4%BF%AE%E6%94%B9%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F%E7%9A%84%E8%BF%87%E7%A8%8B%0A%0A!%5B19c70cd05a0761c9d895c5417eb661c9.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3126)%0A!%5B673acfffa52f52c4b81d7361d1506465.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3124)%0A!%5B001c0e113b24edbf8ece5ce41ded4041.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3125)%0A%0A%E6%B3%A8%E6%84%8F%EF%BC%9Ablock%E5%86%85%E9%83%A8%E4%BF%AE%E6%94%B9%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E5%8F%AA%E6%9C%89%E5%9C%A8%E4%BF%AE%E6%94%B9%E5%8F%98%E9%87%8F%E7%9A%84%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E6%97%B6%E5%80%99%E6%89%8D%E9%9C%80%E8%A6%81%E6%B7%BB%E5%8A%A0__block%EF%BC%8C%E5%A6%82%E4%B8%8B%E7%BB%99%E6%95%B0%E7%BB%84%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0%EF%BC%8C%E5%B9%B6%E6%B2%A1%E6%9C%89%E4%BF%AE%E6%94%B9%E6%95%B0%E7%BB%84%E7%9A%84%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%EF%BC%8C%E6%89%80%E4%BB%A5%E4%B8%8D%E9%9C%80%E8%A6%81%E6%B7%BB%E5%8A%A0__block%E4%BF%AE%E9%A5%B0%E3%80%82%0A!%5B72791af098b901d94e4f5d9942708f0f.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3127)%0A%0A%23%23%23%23%20%E5%8D%81%E4%BA%8C%E3%80%81block%E5%AF%B9%E5%8F%98%E9%87%8F%E7%9A%84%E5%BC%95%E7%94%A8%E6%80%BB%E7%BB%93%0A%0A*%20%E5%BD%93block%E6%8B%B7%E8%B4%9D%E5%88%B0%E6%A0%88%E4%B8%8A%E6%97%B6%EF%BC%8C%E5%AF%B9%E5%AE%83%E4%BB%AC%E9%83%BD%E4%B8%8D%E4%BC%9A%E4%BA%A7%E7%94%9F%E5%BC%BA%E5%BC%95%E7%94%A8%0A*%20%E5%BD%93block%E6%8B%B7%E8%B4%9D%E5%88%B0%E5%A0%86%E4%B8%8A%E6%97%B6%EF%BC%8C%E9%83%BD%E4%BC%9A%E9%80%9A%E8%BF%87copy%E5%87%BD%E6%95%B0%E6%9D%A5%E5%A4%84%E7%90%86%E5%AE%83%E4%BB%AC%EF%BC%9A%0A%201.%20%E5%BD%93%E4%B8%BAoc%E5%AF%B9%E8%B1%A1%E6%97%B6%EF%BC%8C%E5%8F%96%E5%86%B3%E4%BA%8E%E5%BD%93%E5%88%9D%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BF%E9%97%AE%E7%9A%84%EF%BC%88weak%E3%80%90%E5%BC%B1%E5%BC%95%E7%94%A8%E3%80%91%E8%BF%98%E6%98%AFstrong%E3%80%90%E5%BC%BA%E5%BC%95%E7%94%A8%E3%80%91%EF%BC%89%0A%202.%20%E8%8B%A5%E6%98%AF__block%EF%BC%8C%E5%88%99block%E4%BC%9A%E5%AF%B9%E5%8F%98%E9%87%8F%E5%BC%BA%E5%BC%95%E7%94%A8%0A%0A%23%23%23%23%20%E5%8D%81%E4%B8%89%E3%80%81__block%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%0A%0A%23%23%23%23%23%2013.1%20__block%E7%9A%84__forwarding%E6%8C%87%E9%92%88%0A!%5B42460e0860ad4e8078669a2fa3912503.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3130)%0A%0A%5B%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6Block%E6%8D%95%E8%8E%B7%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F%E5%92%8C__block%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%5D(https%3A%2F%2Fwww.jianshu.com%2Fp%2Fee9756f3d5f6)%0A%0A%23%23%23%23%23%2013.2%20block%E6%8D%95%E8%8E%B7%E5%AF%B9%E8%B1%A1%0Ablock%E6%8D%95%E8%8E%B7%E5%A4%96%E7%95%8C%E5%AF%B9%E8%B1%A1%E6%97%B6%E5%80%99%EF%BC%8C%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%B0%86%E8%AF%A5%E5%AF%B9%E8%B1%A1%E5%8C%85%E8%A3%85%E4%B8%BA__Block_byref_p_2%E5%AF%B9%E8%B1%A1%0A!%5B1de808041114deae25c55a0128665bd9.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3131)%0A%E5%8C%85%E8%A3%85%E5%90%8E%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%9A%0A!%5B52803a5258108fede8b02712c9c75207.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3132)%0A%0A%23%23%23%23%23%2013.3%20block%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8%0A%0A!%5B3ae2d6cf2caf371d3d7fce76cfbe0b48.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3134)%0A%0A1.%20block%E9%80%A0%E6%88%90%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8%E7%9A%84%E5%8E%9F%E5%9B%A0%EF%BC%9A%0A%20%20%20block%E5%AF%B9auto%E5%8F%98%E9%87%8F%EF%BC%88Person%20*p%EF%BC%89%E9%BB%98%E8%AE%A4%E6%98%AF%E5%BC%BA%E5%BC%95%E7%94%A8%0A%20Person%20*p%20%E5%AF%B9%E8%B1%A1%E5%AF%B9%E8%AF%A5block%E4%B9%9F%E6%98%AF%E5%BC%BA%E5%BC%95%E7%94%A8%0A%20%E9%80%A0%E6%88%90%E4%BA%86%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8%0A%20!%5B2b27ff8c2b7869c43cb2f957d7b84537.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3135)%0A%20%0A2.%20%E8%A7%A3%E5%86%B3%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8%0A%20%20__weak%20%E5%85%B3%E9%94%AE%E5%AD%97%E8%A7%A3%E5%86%B3%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89%0A%20%20!%5B0df803a716be50a7ab703b9851c5b10a.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3136)%0A%20%20__unsafe_unretained%E5%85%B3%E9%94%AE%E5%AD%97%E8%A7%A3%E5%86%B3%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%EF%BC%89%0A%20%20!%5Bd2397b64c1dd5a75c446d708cc729c90.png%5D(evernotecid%3A%2F%2FCFE27DEA-507B-4F51-A112-35468FF833F4%2Fappyinxiangcom%2F21790515%2FENResource%2Fp3138)%0A%20%20__weak%20%E5%92%8C%20__unsafe_unretained%E5%8C%BA%E5%88%AB%EF%BC%9A%0A%20%20%0A%20%20%20*%20__weak%E4%B8%8D%E4%BC%9A%E4%BA%A7%E7%94%9F%E5%BC%BA%E5%BC%95%E7%94%A8%EF%BC%8C%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%E9%94%80%E6%AF%81%E6%97%B6%EF%BC%8C%E4%BC%9A%E8%87%AA%E5%8A%A8%E8%AE%A9%E6%8C%87%E9%92%88%E7%BD%AE%E4%B8%BAnil%0A%20%20%20*%20__unsafe_unretained%E4%B8%8D%E4%BC%9A%E4%BA%A7%E7%94%9F%E5%BC%BA%E5%BC%95%E7%94%A8%EF%BC%8C%E4%B8%8D%E5%AE%89%E5%85%A8%EF%BC%8C%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%E9%94%80%E6%AF%81%E6%97%B6%EF%BC%8C%E6%8C%87%E9%92%88%E5%AD%98%E5%82%A8%E7%9A%84%E5%9C%B0%E5%9D%80%E5%80%BC%E4%B8%8D%E5%8F%98%0A%20%20%0A%0A%0A</center></body></html>