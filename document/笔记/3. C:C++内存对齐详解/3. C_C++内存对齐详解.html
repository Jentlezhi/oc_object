<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.2.1 (458835)"/><meta name="created" content="2019-08-21 15:06:38 +0000"/><meta name="source" content="web.clip7"/><meta name="source-application" content="webclipper.evernote"/><meta name="source-url" content="https://zhuanlan.zhihu.com/p/30007037"/><meta name="updated" content="2019-11-12 03:22:38 +0000"/><title>3. C/C++内存对齐详解</title></head><body>
  <div style="--en-clipped-content:fullPage">
<div><br/></div><div style="font-size: 16px; display:block; min-width: 100%; position: relative;"> <div><div style="font-family:-apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif;color:rgb(26, 26, 26);-webkit-tap-highlight-color:rgba(26, 26, 26, 0);background:rgb(255, 255, 255);"><div><div><span style="padding-bottom:46px;"><div style="background:rgb(255, 255, 255);min-width:1000px;overflow:hidden;"><div style="width:100%;"><div style="position:relative;z-index:100;min-width:1000px;padding:16px;line-height:28px;color:rgb(133, 144, 166);text-align:center;background-color:rgb(235, 235, 235);"><div style="width:1000px;padding:0px 24px;margin:0px auto;box-sizing:border-box;">我们检测到你可能使用了 AdBlock 或 Adblock Plus，它的部分策略可能会影响到正常功能的使用（如关注）。<br/>你可以设定特殊规则或将知乎加入白名单，以便我们更好地提供服务。 （<a href="https://www.zhihu.com/question/54919485" target="_blank" style="color:inherit;text-decoration:none;">为什么？</a>）</div></div><div><div style="visibility:hidden;position:relative;top:0px;right:0px;bottom:0px;left:0px;display:block;float:none;margin:0px;height:52px;"/></div></div><div style="box-sizing:border-box;overflow:hidden;outline:none;"><div style="overflow:hidden;width:690px;margin:0px auto;"><h1 style="font:inherit;font-weight:600;font-size:24px;line-height:1.22;overflow-wrap:break-word;margin:24px 0px;">C/C++内存对齐详解</h1><div style="display:flex;-webkit-box-align:center;align-items:center;"><div style="display:flex;-webkit-box-align:center;align-items:center;-webkit-box-flex:1;flex:1 1 0%;white-space:nowrap;overflow:hidden;"><span><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/qinlibo_nlp" style="color:inherit;text-decoration:none;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-f575fa4bf1afd510f4d61486358122bd_l.jpg" height="100" width="100"/></a></div></div></span><div style="-webkit-box-flex:1;flex:1 1 0%;margin-left:14px;overflow:hidden;"><div style="display:flex;-webkit-box-align:center;align-items:center;font-size:15px;line-height:1.1;flex-shrink:0;"><span style="font-weight:600;color:rgb(68, 68, 68);"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/qinlibo_nlp" style="color:inherit;text-decoration:none;">忆臻</a></div></div><a href="https://www.zhihu.com/question/48510028" target="_blank" rel="noopener noreferrer" style="color:inherit;text-decoration:none;margin-left:0.3em;"><span style="display:inline-flex;align-items:center;">​<img src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='Zi Zi--BadgeCert' fill='currentColor' viewBox='0 0 24 24' width='18' height='18'%3e%3cg fill='none' fill-rule='evenodd'%3e%3cpath fill='%230F88EB' d='M2.64 13.39c1.068.895 1.808 2.733 1.66 4.113l.022-.196c-.147 1.384.856 2.4 2.24 2.278l-.198.016c1.387-.122 3.21.655 4.083 1.734l-.125-.154c.876 1.084 2.304 1.092 3.195.027l-.127.152c.895-1.068 2.733-1.808 4.113-1.66l-.198-.022c1.386.147 2.402-.856 2.279-2.238l.017.197c-.122-1.388.655-3.212 1.734-4.084l-.154.125c1.083-.876 1.092-2.304.027-3.195l.152.127c-1.068-.895-1.808-2.732-1.66-4.113l-.022.198c.147-1.386-.856-2.4-2.24-2.279l.198-.017c-1.387.123-3.21-.654-4.083-1.733l.125.153c-.876-1.083-2.304-1.092-3.195-.027l.127-.152c-.895 1.068-2.733 1.808-4.113 1.662l.198.02c-1.386-.147-2.4.857-2.279 2.24L4.4 6.363c.122 1.387-.655 3.21-1.734 4.084l.154-.126c-1.083.878-1.092 2.304-.027 3.195l-.152-.127z'%3e%3c/path%3e%3cpath fill='%23FFF' d='M9.78 15.728l-2.633-2.999s-.458-.705.242-1.362c.7-.657 1.328-.219 1.328-.219l1.953 2.132 4.696-4.931s.663-.348 1.299.198c.636.545.27 1.382.27 1.382s-3.466 3.858-5.376 5.782c-.98.93-1.778.017-1.778.017z'%3e%3c/path%3e%3c/g%3e%3c/svg%3e"/></span></a></span></div><div style="overflow:hidden;color:rgb(100, 100, 100);"><div style="display:flex;-webkit-box-align:center;align-items:center;margin-top:2px;font-size:14px;"><div style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:rgb(100, 100, 100);">哈尔滨工业大学 计算机科学与技术博士在读</div></div></div></div></div></div><div><span style="display:block;margin-top:14px;font-size:14px;color:rgb(133, 144, 166);"/></div></div><div style="width:690px;margin:0px auto;overflow:visible;"><div style="word-break:break-word;line-height:1.6;margin-top:20px;"><h2 style="margin:0px;font:inherit;clear:left;margin-bottom:1.16667em;font-size:1.2em;line-height:1.5;font-weight:600;margin-top:0px;"><b style="font-weight:600;"><i>1、什么是内存对齐</i></b></h2><p style="margin:1.4em 0px;">还是用一个例子带出这个问题，看下面的小程序，理论上，32位系统下，int占4byte，char占一个byte，那么将它们放到一个结构体中应该占4+1=5byte；但是实际上，通过运行程序得到的结果是8 byte，这就是内存对齐所导致的。</p><div style="margin:1em 0px;"><pre style="padding:0.88889em;font-size:0.9em;word-break:normal;overflow-wrap:normal;white-space:pre;overflow:auto;background:rgb(246, 246, 246);border-radius:4px;margin:0px;"><code style="font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;margin:0px;padding:0px;border-radius:0px;font-size:inherit;background-color:inherit;"><span style="font-style:italic;color:rgb(153, 153, 153);">//32位系统
</span><span style="font-style:italic;color:rgb(153, 153, 153);"/><span style="font-weight:600;color:rgb(153, 153, 153);">#include</span><span>&lt;stdio.h&gt;</span><span style="font-weight:600;color:rgb(153, 153, 153);"
/><span style="font-weight:600;color:rgb(153, 153, 153);"/><span style="font-weight:600;">struct</span><span>{</span>
    <span style="font-weight:600;color:rgb(23, 81, 153);">int</span> <span>x</span><span>;</span>
    <span style="font-weight:600;color:rgb(23, 81, 153);">char</span> <span>y</span><span>;</span>
<span>}</span><span>s</span><span>;</span>

<span style="font-weight:600;color:rgb(23, 81, 153);">int</span> <span style="font-weight:600;color:rgb(241, 64, 60);">main</span><span>()</span>
<span>{</span>
    <span>printf</span><span>(</span><span style="color:rgb(241, 64, 60);">"%d</span><span style="color:rgb(241, 64, 60);">\n</span><span style="color:rgb(241, 64, 60);">"</span><span>,</span><span style="font-weight:600;">sizeof</span><span>(</span><span>s</span><span>);</span>  <span style="font-style:italic;color:rgb(153, 153, 153);">// 输出8
</span><span style="font-style:italic;color:rgb(153, 153, 153);"/>    <span style="font-weight:600;">return</span> <span style="color:rgb(0, 132, 255);">0</span><span>;</span>
<span>}</span>
</code></pre></div><p style="margin:1.4em 0px;">现代计算机中内存空间都是按照 byte 划分的，从理论上讲似乎对任何类型的变量的访问可以从任何地址开始，但是实际的计算机系统对基本类型数据在内存中存放的位置有限制，它们会要求这些数据的首地址的值是某个数k（通常它为4或8）的倍数，这就是所谓的内存对齐。</p><h2 style="margin:0px;font:inherit;clear:left;margin-top:2.33333em;margin-bottom:1.16667em;font-size:1.2em;line-height:1.5;font-weight:600;"><b style="font-weight:600;"><i>2、为什么要进行内存对齐</i></b></h2><p style="margin:1.4em 0px;">尽管内存是以字节为单位，但是大部分处理器并不是按字节块来存取内存的.它一般会以双字节,四字节,8字节,16字节甚至32字节为单位来存取内存，我们将上述这些存取单位称为内存存取粒度.</p><p style="margin:1.4em 0px;">现在考虑4字节存取粒度的处理器取int类型变量（32位系统），该处理器只能从地址为4的倍数的内存开始读取数据。</p><p style="margin:1.4em 0px;">假如没有内存对齐机制，数据可以任意存放，现在一个int变量存放在从地址1开始的联系四个字节地址中，该处理器去取数据时，要先从0地址开始读取第一个4字节块,剔除不想要的字节（0地址）,然后从地址4开始读取下一个4字节块,同样剔除不要的数据（5，6，7地址）,最后留下的两块数据合并放入寄存器.这需要做很多工作.</p><div style="margin:1.4em 0px;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-3f40af513a94901b36ceb5387982277e_r.jpg" height="414" width="752"/></div><p style="margin:1.4em 0px;">现在有了内存对齐的，int类型数据只能存放在按照对齐规则的内存中，比如说0地址开始的内存。那么现在该处理器在取数据时一次性就能将数据读出来了，而且不需要做额外的操作，提高了效率。</p><div style="margin:1.4em 0px;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-361e2d16876ce8383c9e6ea2dca34474_r.jpg" height="492" width="744"/></div><h2 style="margin:0px;font:inherit;clear:left;margin-top:2.33333em;margin-bottom:1.16667em;font-size:1.2em;line-height:1.5;font-weight:600;"><b style="font-weight:600;"><i>3、内存对齐规则</i></b></h2><p style="margin:1.4em 0px;">每个特定平台上的编译器都有自己的默认“对齐系数”（也叫对齐模数）。gcc中默认#pragma pack(4)，可以通过预编译命令#pragma pack(n)，n = 1,2,4,8,16来改变这一系数。</p><p style="margin:1.4em 0px;">有效对其值：是给定值#pragma pack(n)和结构体中最长数据类型长度中较小的那个。有效对齐值也叫<b style="font-weight:600;">对齐单位</b>。 </p><p style="margin:1.4em 0px;">了解了上面的概念后，我们现在可以来看看内存对齐需要遵循的规则：</p><p style="margin:1.4em 0px;">(1)  结构体第一个成员的<b style="font-weight:600;">偏移量（offset）</b>为0，以后每个成员相对于结构体首地址的 offset 都是<b style="font-weight:600;">该成员大小与有效对齐值中较小那个</b>的整数倍，如有需要编译器会在成员之间加上填充字节。</p><p style="margin:1.4em 0px;">(3)  <b style="font-weight:600;">结构体的总大小</b>为 有效对齐值 的<b style="font-weight:600;">整数倍</b>，如有需要编译器会在最末一个成员之后加上填充字节。</p><p style="margin:1.4em 0px;">下面给出几个例子以便于理解：</p><div style="margin:1em 0px;"><pre style="padding:0.88889em;font-size:0.9em;word-break:normal;overflow-wrap:normal;white-space:pre;overflow:auto;background:rgb(246, 246, 246);border-radius:4px;margin:0px;"><code style="font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;margin:0px;padding:0px;border-radius:0px;font-size:inherit;background-color:inherit;"><span style="font-style:italic;color:rgb(153, 153, 153);">//32位系统
</span><span style="font-style:italic;color:rgb(153, 153, 153);"/><span style="font-weight:600;color:rgb(153, 153, 153);">#include</span><span>&lt;stdio.h&gt;</span><span style="font-weight:600;color:rgb(153, 153, 153);"
/><span style="font-weight:600;color:rgb(153, 153, 153);"/><span style="font-weight:600;">struct</span>
<span>{</span>
    <span style="font-weight:600;color:rgb(23, 81, 153);">int</span> <span>i</span><span>;</span>    
    <span style="font-weight:600;color:rgb(23, 81, 153);">char</span> <span>c1</span><span>;</span>  
    <span style="font-weight:600;color:rgb(23, 81, 153);">char</span> <span>c2</span><span>;</span>  
<span>}</span><span>x1</span><span>;</span>

<span style="font-weight:600;">struct</span><span>{</span>
    <span style="font-weight:600;color:rgb(23, 81, 153);">char</span> <span>c1</span><span>;</span>  
    <span style="font-weight:600;color:rgb(23, 81, 153);">int</span> <span>i</span><span>;</span>    
    <span style="font-weight:600;color:rgb(23, 81, 153);">char</span> <span>c2</span><span>;</span>  
<span>}</span><span>x2</span><span>;</span>

<span style="font-weight:600;">struct</span><span>{</span>
    <span style="font-weight:600;color:rgb(23, 81, 153);">char</span> <span>c1</span><span>;</span>  
    <span style="font-weight:600;color:rgb(23, 81, 153);">char</span> <span>c2</span><span>;</span> 
    <span style="font-weight:600;color:rgb(23, 81, 153);">int</span> <span>i</span><span>;</span>    
<span>}</span><span>x3</span><span>;</span>

<span style="font-weight:600;color:rgb(23, 81, 153);">int</span> <span style="font-weight:600;color:rgb(241, 64, 60);">main</span><span>()</span>
<span>{</span>
    <span>printf</span><span>(</span><span style="color:rgb(241, 64, 60);">"%d</span><span style="color:rgb(241, 64, 60);">\n</span><span style="color:rgb(241, 64, 60);">"</span><span>,</span><span style="font-weight:600;">sizeof</span><span>(</span><span>x1</span><span>));</span>  <span style="font-style:italic;color:rgb(153, 153, 153);">// 输出8
</span><span style="font-style:italic;color:rgb(153, 153, 153);"/>    <span>printf</span><span>(</span><span style="color:rgb(241, 64, 60);">"%d</span><span style="color:rgb(241, 64, 60);">\n</span><span style="color:rgb(241, 64, 60);">"</span><span>,</span><span style="font-weight:600;">sizeof</span><span>(</span><span>x2</span><span>));</span>  <span style="font-style:italic;color:rgb(153, 153, 153);">// 输出12
</span><span style="font-style:italic;color:rgb(153, 153, 153);"/>    <span>printf</span><span>(</span><span style="color:rgb(241, 64, 60);">"%d</span><span style="color:rgb(241, 64, 60);">\n</span><span style="color:rgb(241, 64, 60);">"</span><span>,</span><span style="font-weight:600;">sizeof</span><span>(</span><span>x3</span><span>));</span>  <span style="font-style:italic;color:rgb(153, 153, 153);">// 输出8
</span><span style="font-style:italic;color:rgb(153, 153, 153);"/>    <span style="font-weight:600;">return</span> <span style="color:rgb(0, 132, 255);">0</span><span>;</span>
<span>}</span>
</code></pre></div><p style="margin:1.4em 0px;">以上测试都是在Linux环境下进行的，linux下默认#pragma pack(4)，且结构体中最长的数据类型为4个字节，所以有效对齐单位为4字节，下面根据上面所说的规则以s2来分析其内存布局：</p><p style="margin:1.4em 0px;">首先使用规则1，对成员变量进行对齐：</p><p style="margin:1.4em 0px;">sizeof(c1) = 1 &lt;= 4(有效对齐位)，按照1字节对齐，占用第0单元；</p><p style="margin:1.4em 0px;">sizeof(i)  = 4 &lt;= 4(有效对齐位)，相对于结构体首地址的偏移要为4的倍数，占用第4，5，6，7单元；</p><p style="margin:1.4em 0px;">sizeof(c2) = 1 &lt;= 4(有效对齐位)，相对于结构体首地址的偏移要为1的倍数，占用第8单元；</p><p style="margin:1.4em 0px;">然后使用规则2，对结构体整体进行对齐：</p><p style="margin:1.4em 0px;">s2中变量i占用内存最大占4字节，而有效对齐单位也为4字节，两者较小值就是4字节。因此整体也是按照4字节对齐。由规则1得到s2占9个字节，此处再按照规则2进行整体的4字节对齐，所以整个结构体占用12个字节。</p><p style="margin:1.4em 0px;">根据上面的分析，不难得出上面例子三个结构体的内存布局如下：</p><div style="margin:1.4em 0px;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-86c644ce29b1e2d3858380aaa631cc1d_r.jpg" height="452" width="1282"/></div><h2 style="margin:0px;font:inherit;clear:left;margin-top:2.33333em;margin-bottom:1.16667em;font-size:1.2em;line-height:1.5;font-weight:600;"><b style="font-weight:600;"><i>#pragma pack(n)</i></b></h2><p style="margin:1.4em 0px;">不同平台上编译器的 pragma pack 默认值不同。而我们可以通过预编译命令#pragma pack(n), n= 1,2,4,8,16来改变对齐系数。</p><p style="margin:1.4em 0px;">例如，对于上个例子的三个结构体，如果前面加上#pragma pack(1)，那么此时有效对齐值为1字节，此时根据对齐规则，不难看出成员是连续存放的，三个结构体的大小都是6字节。</p><div style="margin:1.4em 0px;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-672ebe0ccc1430adbda00dfd7abc0375_r.jpg" height="272" width="1294"/></div><p style="margin:1.4em 0px;">如果前面加上#pragma pack(2)，有效对齐值为2字节，此时根据对齐规则，三个结构体的大小应为6,8,6。内存分布图如下：</p><div style="margin:1.4em 0px;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-1c35bc20c76d85d07855901964488637_r.jpg" height="296" width="1306"/></div><p style="margin:1.4em 0px;">经过上面的实例分析，大家应该对内存对齐有了全面的认识和了解，在以后的编码中定义结构体时需要考虑成员变量定义的先后顺序了。</p><blockquote style="margin:1.4em 0px;padding-left:1em;color:rgb(100, 100, 100);border-left:3px solid rgb(211, 211, 211);margin-bottom:0px;">参考资料：<br/><a href="https://link.zhihu.com/?target=http%3A//light3moon.com/2015/01/19/%255B%25E8%25BD%25AC%255D%2520%25E5%2586%2585%25E5%25AD%2598%25E5%25AF%25B9%25E9%25BD%2590/" target="_blank" rel="nofollow noreferrer" style="color:inherit;cursor:pointer;border-bottom:1px solid grey;text-decoration:none;">http://light3moon.com/2015/01/19/[%E8%BD%AC]%20%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/</a><br/><i>更多文章见本文公众号：码农有道</i><br/><i>版权所有！</i></blockquote></div></div><div style="font-size:14px;color:rgb(133, 144, 166);padding:16px 0px;overflow:hidden;width:690px;margin:0px auto;">编辑于 2017-10-10</div><div style="overflow:hidden;width:690px;margin:0px auto;display:flex;"><div style="display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-align:center;align-items:center;margin-bottom:-10px;padding:16px 0px;"><div style="position:relative;display:inline-block;padding:0px 12px;color:rgb(0, 132, 255);vertical-align:top;border-radius:100px;background:rgba(0, 132, 255, 0.1);overflow:hidden;margin-bottom:10px;height:33px;font-size:13px;line-height:33px;margin-right:5px;"><span><a href="https://www.zhihu.com/topic/19580349" target="_blank" style="color:inherit;text-decoration:none;"><div style="position:relative;display:inline-block;"><div>计算机科学</div></div></a></span></div><div style="position:relative;display:inline-block;padding:0px 12px;color:rgb(0, 132, 255);border-radius:100px;background:rgba(0, 132, 255, 0.1);vertical-align:middle;overflow:hidden;margin-bottom:10px;height:33px;font-size:13px;line-height:33px;margin-right:5px;"><span><a href="https://www.zhihu.com/topic/19584970" target="_blank" style="color:inherit;text-decoration:none;"><div style="position:relative;display:inline-block;"><div>C++</div></div></a></span></div><div style="position:relative;display:inline-block;padding:0px 12px;color:rgb(0, 132, 255);border-radius:100px;background:rgba(0, 132, 255, 0.1);vertical-align:middle;overflow:hidden;margin-bottom:10px;height:33px;font-size:13px;line-height:33px;"><span><a href="https://www.zhihu.com/topic/19625716" target="_blank" style="color:inherit;text-decoration:none;"><div style="position:relative;display:inline-block;"><div>算法与数据结构</div></div></a></span></div></div></div><div style="overflow:hidden;width:690px;margin:0px auto;"><div style="visibility:hidden;position:static;top:auto;right:auto;bottom:0px;left:0px;display:block;float:none;margin:0px 0px 10px;height:54px;"/></div></div><div style="box-sizing:border-box;overflow:hidden;"><div style="overflow:hidden;width:690px;margin:0px auto;padding-top:30px;margin-bottom:-8px;"><h3 style="margin:0px;font:inherit;font-weight:600;line-height:1.375;font-size:16px;color:rgb(26, 26, 26);border-bottom:1px solid rgb(235, 235, 235);border-top-width:1px;border-right-width:1px;border-left-width:1px;border-top-color:rgb(235, 235, 235);border-right-color:rgb(235, 235, 235);border-left-color:rgb(235, 235, 235);padding-bottom:12px;border-width:0.5px;margin-top:0px;">文章被以下专栏收录</h3><ul style="padding:0px;margin:0px;"><div style="margin:24px 0px;"><div style="display:flex;height:40px;"><div style="float:left;margin-right:16px;"><a href="https://zhuanlan.zhihu.com/qinlibo-cs" style="color:inherit;text-decoration:none;"><div style="position:relative;display:inline-block;"><div><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-fe57a6413b009cc57a83d51b62d54036_l.jpg" height="100" width="100"/></div></div></a></div><div style="-webkit-box-flex:1;flex:1 1 0%;overflow:hidden;margin-right:6px;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;"><h2 style="font:inherit;line-height:1.6;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin:0px;font-size:15px;font-weight:600;color:rgb(68, 68, 68);"><a href="https://zhuanlan.zhihu.com/qinlibo-cs" style="color:inherit;text-decoration:none;"><div style="position:relative;display:inline-block;"><div>编译，操作系统，C++以及其它</div></div></a></h2><div style="line-height:1.5;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:0px;font-size:14px;color:rgb(100, 100, 100);">记录计算机科学与技术的点点滴滴</div></div><div style="align-self:center;"><a href="https://zhuanlan.zhihu.com/qinlibo-cs" type="button" style="text-decoration:none;display:inline-block;padding:0px 16px;font-size:14px;line-height:32px;text-align:center;cursor:pointer;background:none;border:1px solid;border-radius:3px;color:rgb(133, 144, 166);">进入专栏</a></div></div></div></ul></div><div style="background:rgb(246, 246, 246);position:relative;overflow:hidden;margin:24px auto;width:1529px;"><h3 style="font:inherit;font-weight:600;line-height:1.375;font-size:16px;color:rgb(26, 26, 26);border-bottom:1px solid rgb(235, 235, 235);border-top-width:1px;border-right-width:1px;border-left-width:1px;border-top-color:rgb(235, 235, 235);border-right-color:rgb(235, 235, 235);border-left-color:rgb(235, 235, 235);padding-bottom:12px;border-width:0.5px;width:690px;margin:24px auto 4px;">推荐阅读</h3><ul style="padding:0px;display:flex;-webkit-box-pack:center;justify-content:center;margin:32px auto;"><a href="https://zhuanlan.zhihu.com/p/24516370" style="color:inherit;text-decoration:none;height:226px;width:245px;min-width:245px;border-radius:5px;box-shadow:rgba(26, 26, 26, 0.06) 0px 6px 14px 0px;background:rgb(255, 255, 255);margin-right:14px;position:relative;overflow:hidden;transition:transform 0.3s ease 0s, -webkit-transform 0.3s ease 0s;"><div><h1 style="font:inherit;font-weight:600;font-size:16px;min-width:225px;color:rgb(26, 26, 26);line-height:22px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin:12px;">Stop learning "Modern C++"</h1><p style="font-size:14px;color:rgb(26, 26, 26);line-height:20px;max-height:118px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-line-clamp:6;-webkit-box-orient:vertical;margin:8px 12px;">我不知道为什么大家争着抢着学什么“现代 C++”。那些人所谓的现代 C++ 无非就是：1. unique_ptr/shared_ptr 然而天天鼓吹智能指针的人没几个人明白这其实是资源所有权的问题，然后这些人就…</p><div style="position:absolute;bottom:12px;left:12px;display:flex;-webkit-box-pack:justify;justify-content:space-between;width:100%;font-size:14px;color:rgb(133, 144, 166);line-height:20px;"><span>刘雨培</span><span style="margin-right:24px;">发表于less ...</span></div></div></a><a href="https://zhuanlan.zhihu.com/p/41309205" style="color:inherit;text-decoration:none;height:226px;width:245px;min-width:245px;border-radius:5px;box-shadow:rgba(26, 26, 26, 0.06) 0px 6px 14px 0px;background:rgb(255, 255, 255);margin-right:14px;position:relative;overflow:hidden;transition:transform 0.3s ease 0s, -webkit-transform 0.3s ease 0s;"><div><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-c62704a71918331e08525a0c10704170_qhd.jpg" height="178" width="480"/><h1 style="font:inherit;font-weight:600;font-size:16px;min-width:225px;color:rgb(26, 26, 26);line-height:22px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin:12px;">C++中虚函数、虚继承内存模型</h1><div style="position:absolute;bottom:12px;left:12px;display:flex;-webkit-box-pack:justify;justify-content:space-between;width:100%;font-size:14px;color:rgb(133, 144, 166);line-height:20px;"><span>Holy Chen</span><span style="margin-right:24px;"/></div></div></a><a href="https://zhuanlan.zhihu.com/p/61944984" style="color:inherit;text-decoration:none;height:226px;width:245px;min-width:245px;border-radius:5px;box-shadow:rgba(26, 26, 26, 0.06) 0px 6px 14px 0px;background:rgb(255, 255, 255);margin-right:14px;position:relative;overflow:hidden;transition:transform 0.3s ease 0s, -webkit-transform 0.3s ease 0s;"><div><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-607c94f14f12b83c312a0664fbd5ec2c_qhd.jpg" height="269" width="480"/><h1 style="font:inherit;font-weight:600;font-size:16px;min-width:225px;color:rgb(26, 26, 26);line-height:22px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin:12px;">有些人的代码驾驭能力真的是可怕（Leetcoder 004）</h1><div style="position:absolute;bottom:12px;left:12px;display:flex;-webkit-box-pack:justify;justify-content:space-between;width:100%;font-size:14px;color:rgb(133, 144, 166);line-height:20px;"><span>iceiceice</span><span style="margin-right:24px;"/></div></div></a><a href="https://zhuanlan.zhihu.com/p/28331415" style="color:inherit;text-decoration:none;height:226px;width:245px;min-width:245px;border-radius:5px;box-shadow:rgba(26, 26, 26, 0.06) 0px 6px 14px 0px;background:rgb(255, 255, 255);margin-right:14px;position:relative;overflow:hidden;transition:transform 0.3s ease 0s, -webkit-transform 0.3s ease 0s;"><div><h1 style="font:inherit;font-weight:600;font-size:16px;min-width:225px;color:rgb(26, 26, 26);line-height:22px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin:12px;">线性求后缀数组</h1><p style="font-size:14px;color:rgb(26, 26, 26);line-height:20px;max-height:118px;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-line-clamp:6;-webkit-box-orient:vertical;margin:8px 12px;">虽然从 DC3 到 SA-IS 的线性构造后缀数组的算法现在应该都是老生常谈了，但是为了&amp;lt;del&amp;gt;先把下篇鸽掉&amp;lt;/del&amp;gt;对后缀数组算法有更详尽的了解，啊窝编不下去了，还是进入正题吧。其…</p><div style="position:absolute;bottom:12px;left:12px;display:flex;-webkit-box-pack:justify;justify-content:space-between;width:100%;font-size:14px;color:rgb(133, 144, 166);line-height:20px;"><span>傅笙芳</span><span style="margin-right:24px;"/></div></div></a></ul></div><div style="overflow:hidden;width:690px;height:100%;border-top:52px solid transparent;margin:-52px auto 0px;"><div style="display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;box-sizing:border-box;border:1px solid rgb(235, 235, 235);box-shadow:rgba(26, 26, 26, 0.1) 0px 1px 3px;background:rgb(255, 255, 255);margin-top:12px;border-radius:4px;overflow:visible;"><div style="background:rgb(255, 255, 255);border-bottom:1px solid rgb(246, 246, 246);display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;height:50px;border-radius:2px;padding:0px;margin:0px 20px;"><div style="-webkit-box-flex:1;flex:1 1 0%;"><h2 style="margin:0px;font:inherit;display:inline-block;font-size:15px;font-weight:600;color:rgb(26, 26, 26);">15 条评论</h2></div><div/></div><div style="position:relative;transition:padding-right 0.3s ease 0s;padding:12px 20px;background:rgb(255, 255, 255);border-top:none;"><div style="position:relative;display:flex;-webkit-box-align:end;align-items:flex-end;border:1px solid rgb(235, 235, 235);border-radius:3px;background-color:rgb(246, 246, 246);"><div style="position:relative;display:flex;border-radius:3px;box-sizing:border-box;transition:background 0.2s ease 0s, border 0.2s ease 0s;font-size:15px;height:auto;padding:0px;overflow:hidden;width:100%;background:transparent;border:none;"><div style="-webkit-box-flex:1;flex:1 1 0%;padding:0px;overflow:hidden;font-family:inherit;font-size:inherit;font-weight:inherit;border:none;resize:none;line-height:24px;background:transparent;"><div style="word-break:break-word;line-height:1.6;position:relative;padding:6px 12px;min-height:198px;cursor:text;"><span style="line-height:1.6;cursor:text;clear:both;display:block;"/><div style="margin-top:0px;margin-bottom:0px;"><div style="position:absolute;pointer-events:none;color:rgb(133, 144, 166);"><div style="white-space:pre-wrap;">评论由作者筛选后显示</div></div><div><div style="outline:none;user-select:text;white-space:pre-wrap;overflow-wrap:break-word;"><div><div style="margin-top:0px;margin-bottom:0px;margin:0px;"><div><span><br/></span></div></div></div></div></div></div><span style="line-height:1.6;cursor:text;clear:both;display:block;"/></div><div/></div></div><div style="height:36px;display:flex;-webkit-box-align:center;align-items:center;"><div style="display:flex;"><div style="position:relative;display:inline-block;width:24px;height:24px;margin-right:12px;"/></div></div></div></div><div><div style="-webkit-box-flex:1;flex:1 1 0%;overflow:hidden auto;overflow-y:visible;"><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/mo-xie-12" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-2cdecc3a5df16e31a4fc351c8ed1d112_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/mo-xie-12" style="color:inherit;text-decoration:none;font-weight:500;">奕心</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">学习了。</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/Kurenai_Misuzu" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/da48c4309c648c434e6a44582a1b0a50_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/Kurenai_Misuzu" style="color:inherit;text-decoration:none;font-weight:500;">暮无井见铃</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">C 的 _Alignof 和 C++ 的 alignof 可以获得类型的对齐。</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/da8e974dc_xs.jpg" height="50" width="50"/></span><span>知乎用户</span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">第一个printf少了一个括号</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/yangyingle" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/19131a2db02a86e591a1447bc6c26fbb_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/yangyingle" style="color:inherit;text-decoration:none;font-weight:500;">yangyingle</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">好東西，學習了。</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/zhanghuidream" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-f30aea70c40ceac96198b6d93961840b_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/zhanghuidream" style="color:inherit;text-decoration:none;font-weight:500;">张辉</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">讲的好好。谢谢。</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/feng-kai-98-49" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/0816b3f6bdaee4d990a78818c3c77cc6_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/feng-kai-98-49" style="color:inherit;text-decoration:none;font-weight:500;">凯歌</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">还有再混入double的情况呢</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/xiang-si-zuo-fang-ban-shi-li-shang" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/768a7b305b859360fea1d9a6ca841602_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/xiang-si-zuo-fang-ban-shi-li-shang" style="color:inherit;text-decoration:none;font-weight:500;">相思作坊半世離殤</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">csapp</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/NikoLeo" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/f3c66573bb559e3377f3c44fb157514c_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/NikoLeo" style="color:inherit;text-decoration:none;font-weight:500;">小强</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">遇到过类似问题，一个网络数据包，协议中有个int，但如果结构体定义成int就会收发数据错误，得定义成char[4]才行</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/chen-jiu-zhou-64" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-b54724f050d49fca3fda05497419af81_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/chen-jiu-zhou-64" style="color:inherit;text-decoration:none;font-weight:500;">你是要笑死我吗</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">nice</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/wu-ming-shi-10" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/da8e974dc_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/wu-ming-shi-10" style="color:inherit;text-decoration:none;font-weight:500;">吴明世</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;"><p style="margin:1.4em 0px;margin-top:0px;margin-bottom:0px;">写CUDA非常卡这个……</p></div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/yu-chang-xin-66" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-b3db566ef6650bbbf3f856c8a7354e66_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/yu-chang-xin-66" style="color:inherit;text-decoration:none;font-weight:500;">长鑫啊</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">涨姿势</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/xie-nao-ban" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-e0e95dda7d7a4f69ff3d2fa43e997a7f_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/xie-nao-ban" style="color:inherit;text-decoration:none;font-weight:500;">你并不知道我是谁</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">学到了，感谢</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;position:relative;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/cha-xiao-dong-75" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/da8e974dc_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/cha-xiao-dong-75" style="color:inherit;text-decoration:none;font-weight:500;">查小冬</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">现代Intel的CPU，不对齐并不会影响访问速度</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div><span style="list-style-type:none;position:absolute;left:0px;right:0px;bottom:0px;display:block;margin-right:20px;margin-left:52px;border-bottom:1px solid rgb(246, 246, 246);"/></li><li style="list-style-type:none;position:relative;padding-left:33px;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/king-larry-89" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-bb391ec3368db9864aaf11f08e19bfe4_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/king-larry-89" style="color:inherit;text-decoration:none;font-weight:500;">ValarMorghulis</a></span><span style="color:rgb(133, 144, 166);margin-right:8px;margin-left:8px;">回复</span><span><a target="_blank" href="https://www.zhihu.com/people/cha-xiao-dong-75" style="color:inherit;text-decoration:none;font-weight:500;">查小冬</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;"><p style="margin:1.4em 0px;margin-top:0px;">虽说如此，但是很多场景下我们对性能十分讲究，用的可能也不是Intel的CPU，比如一些嵌入式设备，又或者说游戏引擎开发，可谓是极尽性能之能事，这时候必须要小心翼翼，避免任何有可能影响存取速度的地方，以“榨干”机器的性能。</p><p style="margin:1.4em 0px;">又比如，没有考虑内存对齐的时候，有些内存是“空着”的，也无法利用，这时候对于一些内存极小的设备来说，就必须要争取利用每一块可能的内存，避免空间浪费。</p><p style="margin:-0.8em 0px;"><br/></p><p style="margin:1.4em 0px;margin-bottom:0px;">个人见解，如有错误欢迎指正~</p></div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div><span style="list-style-type:none;position:absolute;left:0px;right:0px;bottom:0px;display:block;margin-right:20px;margin-left:84px;border-bottom:1px solid rgb(246, 246, 246);"/></li><span style="position:absolute;left:0px;right:0px;bottom:0px;display:block;margin:0px 20px;border-bottom:1px solid rgb(246, 246, 246);"/></ul><ul style="padding:0px;margin:0px;position:relative;"><li style="list-style-type:none;"><div style="position:relative;flex-shrink:0;padding:12px 20px 10px;font-size:15px;outline:none;"><div><div style="position:relative;height:24px;padding-right:3px;padding-left:1px;margin-bottom:4px;line-height:24px;"><span style="margin-right:8px;"><div style="position:relative;display:inline-block;"><div><a target="_blank" href="https://www.zhihu.com/people/wellxia" style="color:inherit;text-decoration:none;font-weight:500;"><img src="3.%20C_C++%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90%E8%AF%A6%E8%A7%A3.resources/v2-57a02bb1ccce08cd261cce17474c3e9b_xs.jpg" height="50" width="50"/></a></div></div></span><span><a target="_blank" href="https://www.zhihu.com/people/wellxia" style="color:inherit;text-decoration:none;font-weight:500;">wellxia</a></span><span style="float:right;font-size:14px;color:rgb(133, 144, 166);">1 年前</span></div><div style="padding-left:33px;"><div style="margin-bottom:6px;line-height:25px;"><div style="word-break:break-word;line-height:1.6;">对齐规则: <br style="margin-top:0px;"/>1.基本类型的对齐值就是其sizeof值;<br/>2.结构体的对齐值是其成员的最大对齐值;<br style="margin-bottom:0px;"/>3.编译器可以设置一个最大对齐值，怎么类型的实际对齐值是该类型的对齐值与默认对齐值取最小值得来。</div></div><div style="display:flex;-webkit-box-align:center;align-items:center;height:24px;font-size:14px;line-height:24px;margin-top:4px;"/></div></div></div></li></ul></div></div></div></div></div></div></span></div></div><div/><div><div/></div><div/></div></div></div>
</div>
</body></html>